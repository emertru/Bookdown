##Aplicación del Modelo Arima

# Validación de Estacionariedad

**Un modelo ARIMA requiere que la serie sea estacionaria**. Se dice que una serie es estacionaria cuando su media, varianza y autocovarianza son invariantes en el tiempo.Esta suposición tiene un sentido intuitivo: dado que ARIMA usa retardos previos de series para modelar su comportamiento.

**RECORDAR:** En el paso anterior se observó graficamente que la serie original de la venta de vehículos tiene una tendencia y ademas no tiene media ni varianza constante.Con lo cual pudieramos afirmar que visualmente la serie pareciera ser NO ESTACIONARIA.

Para validarlo, hacemos el **Test de Dickey Fuller:**. Este test se basa en una regresión lineal que incluye la propia serie de tiempo y sus rezagos.Las hipótesis respectivas son:

**Contraste de hipótesis:**

**H0:** Serie No estacionaria: Hay raiz unitaria   **H1:** Serie Estacionaria: No hay raiz unitaria

Tras realizar la prueba aumentada de Dickey-Fuller (ADF), obtenemos un p-valor = 0.01. Como el p-valor < 0.05,  se rechaza H0. En conclusión, *la venta de vehículos es una variable Estacionaria*. 

```{r,message=FALSE}
# Cargar el paquete tseries
library(tseries)
# Realizar prueba de raíz unitaria
adf.test(veh)
```

# Diferenciación 

Dado que la venta de vehículos es una variable estacionaria, no se requiere diferenciar la serie.

# Estimación del modelo Auto.arima


La función auto.arima() es una herramienta muy útil para ajustar modelos ARIMA automáticamente. La idea detrás de esta función es seleccionar automáticamente el mejor modelo ARIMA para una serie de tiempo dada, basándose en criterios estadísticos como el criterio de información de Akaike (AIC) o el criterio de información bayesiano (BIC).

La notación ARIMA(p,d,q)(P,D,Q)[m] se refiere a los parámetros del modelo ARIMA, donde:

p: orden de la parte autoregresiva (AR)
d: orden de diferenciación (I)
q: orden de la parte de media móvil (MA)
P: orden de la parte estacional autoregresiva (SAR)
D: orden de la diferenciación estacional (SI)
Q: orden de la parte estacional de media móvil (SMA)
m: número de períodos en una temporada

*En el modelo ARIMA(1,0,0)(0,1,1)[12]*, el orden AR es 1, el orden MA es 0, el orden de diferenciación es 0, el orden de SAR es 0, el orden de diferenciación estacional es 1, el orden SMA es 1, y el número de períodos en una temporada es 12.

*La interpretación de cada parámetro es la siguiente:*

-*El parámetro AR(1)* indica que se está utilizando la observación más reciente y la observación anterior para predecir la siguiente observación en la serie.

-*El parámetro MA(0)* indica que no se está utilizando ningún término de media móvil para hacer la predicción.

*El parámetro de diferenciación d=0* indica que no se aplicó ninguna diferenciación a la serie.

*El parámetro de diferenciación estacional D=1* indica que se aplicó una diferenciación estacional de primer orden para corregir la estacionalidad en la serie.

*El parámetro SMA(1)* indica que se está utilizando la observación de hace 12 períodos y la observación de hace 1 período para predecir la siguiente observación en la serie.

*En resumen, el modelo ARIMA(1,0,0)(0,1,1)[12] es un modelo que utiliza la observación más reciente y la observación anterior para predecir la siguiente observación en la serie, y también tiene en cuenta la estacionalidad con una diferencia estacional de primer orden y una media móvil estacional de orden 1.*


```{r, message=FALSE}
#Corremos la función auto.arima:
autoarimaveh=auto.arima(veh)
autoarimaveh

```

# Validación de supuestos

Analizamos que los residuos sean Ruido Blanco (los residuos se distribuyen normalmente y no hay autocorrelación entre ellos).

Con la prueba de Ljung-Box, se evalúa si hay o no  autocorrelación en los residuos:

**Hipótesis**
**H0:** No hay autocorrelación de los residuos   **H1:** Existe autocorrelación de los residuos

**CONCLUSIÓN: Como el P-value (0.56) es mayor a 0.05 no se rechaza H0. En ese caso si se cumple la condición de los residuos, son ruido blanco (no se correlacionan los errores).**

```{r, message=FALSE}

Box.test(autoarimaveh$residuals, lag = 20, type = "Ljung-Box")
```

## Predicción corto plazo

# Evaluación del Modelo - MAE y RMSE 


